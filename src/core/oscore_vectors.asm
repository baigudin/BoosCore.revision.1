; ----------------------------------------------------------------------------
; Hardware interrupt service table for TMS320c6416, TMS320c6412 architectures
;
; @author    Sergey Baigudin <baigudin@mail.ru>
; @copyright 2014-2015 Sergey Baigudin
; @license   http://baigudin.com/license/
; @link      http://baigudin.com
; ----------------------------------------------------------------------------
        .ref            os_system_init
        .ref            os_thread_switch
; ----------------------------------------------------------------------------
        .asg            b15, sp
; ----------------------------------------------------------------------------        
        .sect           ".os_ivect"
; ----------------------------------------------------------------------------
; Reload OS if reset
; ----------------------------------------------------------------------------
os_int00:

        b               m00?
        mvc             csr, b0
        and             -2, b0, b0
        mvc             b0, csr
        mvkl            os_system_init, b0
        mvkh            os_system_init, b0
m00?:   b               b0
        nop             5

; ----------------------------------------------------------------------------
; NMI vector handler
; ----------------------------------------------------------------------------
os_int01_nmi:

        b               os_int01_nmi
        nop             5
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; This vector is reserved
; ----------------------------------------------------------------------------
os_int02:

        b               os_int02
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; This vector is reserved
; ----------------------------------------------------------------------------
os_int03:

        b               os_int03
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 4 vector (Timer 0)
; ----------------------------------------------------------------------------
os_int04:

        b               os_thread_switch
        nop             5
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 5 vector
; ----------------------------------------------------------------------------
os_int05:

        b               os_int05
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 6 vector
; ----------------------------------------------------------------------------
os_int06:

        b               os_int06
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 7 vector
; ----------------------------------------------------------------------------
os_int07:

        b               os_int07
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 8 vector
; ----------------------------------------------------------------------------
os_int08:

        b               os_int08
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 9 vector
; ----------------------------------------------------------------------------
os_int09:

        b               os_int09
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 10 vector
; ----------------------------------------------------------------------------
os_int10:

        b               os_int10
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1

; ----------------------------------------------------------------------------
; Interrupt 11 vector
; ----------------------------------------------------------------------------
os_int11:

        b               os_int11
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1                             

; ----------------------------------------------------------------------------
; Interrupt 12 vector
; ----------------------------------------------------------------------------
os_int12:

        b               os_int12
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1                            

; ----------------------------------------------------------------------------
; Interrupt 13 vector
; ----------------------------------------------------------------------------
os_int13:

        b               os_int13
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1                             

; ----------------------------------------------------------------------------
; Interrupt 14 vector
; ----------------------------------------------------------------------------
os_int14:

        b               os_int14
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1                             

; ----------------------------------------------------------------------------
; Interrupt 15 vector
; ----------------------------------------------------------------------------
os_int15:

        b               os_int15
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1
        nop             1                             

